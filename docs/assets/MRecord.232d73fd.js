import{d as R,B as y,r as g,u as b,D as V,X as c,i as u,o as i,c as p,s as I,w as h,v as w,Y as L,Z as B,e as $,a as t,t as k,q as j,A,Q as E,R as T,W as M,h as l,p as O,b as U}from"./vendor.4ddb49f8.js";import{b as q,v as D,c as F}from"./v4.6627ac39.js";import{_ as N}from"./index.87f993cf.js";import{p as H}from"./index.5ff6eeb4.js";import"./manifest.06f50b31.js";const Q=R({name:"RecentRecord",components:{ElButton:y},setup(){const e=g([]),o=b(),s=V("userState");s.value.login||o.push({name:"MHome"});const _=g(!1),r=g(!1);return{recordList:e,ifList:_,loading:r,requestList:()=>{r.value=!0,_.value=!0,q(s.value.userToken).then(a=>{e.value=a.map(n=>({date:n.date,value:(n.flow==="IN"?"+":"-")+n.value,inOrOut:n.flow})),r.value=!1}).catch(a=>{c({title:"",message:a.toString(),position:"bottom-right"}),r.value=!1})}}}}),Y={class:"recent-record"},z=$("Query All records"),G={key:1,class:"list-view"},W={key:0,style:{color:"#8c939d"}},X={class:"date"};function Z(e,o,s,_,r,m){const a=u("el-button");return i(),p("div",Y,[e.ifList?w("",!0):(i(),I(a,{key:0,type:"info",style:{width:"100%"},onClick:e.requestList},{default:h(()=>[z]),_:1},8,["onClick"])),e.ifList?(i(),p("div",G,[e.loading?(i(),p("div",W,"loading...")):w("",!0),(i(!0),p(L,null,B(e.recordList,(n,f)=>(i(),p("div",{class:"record-item",key:f},[t("span",X,k(n.date),1),t("span",{class:j(["value",n.inOrOut])},k(n.value),3)]))),128))])):w("",!0)])}var J=N(Q,[["render",Z],["__scopeId","data-v-7b18a922"]]);const K=R({name:"MRecord",components:{ElInput:A,ElButton:y,ElRadioGroup:E,ElRadioButton:T,RecentRecord:J},setup(){const e=b(),o=V("userState");o.value.login||(c({title:"",message:"You are not logged in, please log in first",position:"bottom-right"}),e.push({name:"MHome"}));const s=M({value:"",flow:"IN",type:"",note:""});return{newRecord:s,createNewRecord:()=>{if(s.value.trim()===""){c({title:"",message:"Value cannot be empty",position:"bottom-right"});return}const r={uuid:D(),value:s.value+"",date:H(Date.now()),flow:s.flow,type:s.type,note:s.note};c({title:"",message:"Adding new record",position:"bottom-right"}),F(o.value.userToken,r).then(()=>{c({title:"",message:"Add new record successfully",position:"bottom-right"})}).catch(m=>{c({type:"error",message:m.toString(),position:"bottom-right"})})}}}}),v=e=>(O("data-v-6284834a"),e=e(),U(),e),P={id:"m-record"},x={class:"record-form"},ee={class:"record-item"},oe=v(()=>t("span",null,"Value",-1)),te={class:"record-item"},se=v(()=>t("span",null,"Flow",-1)),ne={class:"record-item"},ae=v(()=>t("span",null,"Type",-1)),re={class:"record-item"},le=v(()=>t("span",null,"Note",-1)),de={class:"record-item"},ie=$("Submit"),ce={class:"record-overview"};function ue(e,o,s,_,r,m){const a=u("el-input"),n=u("el-radio-button"),f=u("el-radio-group"),S=u("el-button"),C=u("recent-record");return i(),p("div",P,[t("div",x,[t("div",ee,[oe,l(a,{class:"ipt-container",type:"number",modelValue:e.newRecord.value,"onUpdate:modelValue":o[0]||(o[0]=d=>e.newRecord.value=d)},null,8,["modelValue"])]),t("div",te,[se,l(f,{class:"ipt-container",modelValue:e.newRecord.flow,"onUpdate:modelValue":o[1]||(o[1]=d=>e.newRecord.flow=d)},{default:h(()=>[l(n,{label:"IN"}),l(n,{label:"OUT"})]),_:1},8,["modelValue"])]),t("div",ne,[ae,l(a,{class:"ipt-container",modelValue:e.newRecord.type,"onUpdate:modelValue":o[2]||(o[2]=d=>e.newRecord.type=d)},null,8,["modelValue"])]),t("div",re,[le,l(a,{class:"ipt-container",modelValue:e.newRecord.note,"onUpdate:modelValue":o[3]||(o[3]=d=>e.newRecord.note=d)},null,8,["modelValue"])]),t("div",de,[l(S,{style:{width:"100%"},type:"success",onClick:e.createNewRecord},{default:h(()=>[ie]),_:1},8,["onClick"])])]),t("div",ce,[l(C)])])}var ge=N(K,[["render",ue],["__scopeId","data-v-6284834a"]]);export{ge as default};
